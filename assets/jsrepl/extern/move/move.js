/**
  @preserve
  Copyright (c) 2011 Rasmus Andersson <http://rsms.me/>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to deal
  in the Software without restriction, including without limitation the rights
  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
  THE SOFTWARE.
  Copyright (c) 2011 Rasmus Andersson <http://rsms.me/>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to deal
  in the Software without restriction, including without limitation the rights
  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
  THE SOFTWARE.
*/
window.move||(window.move=function(){typeof window.global=="undefined"&&(window.global=window);var Require=function(a){function b(a){var b=0;for(var c=a.length;c>=0;c--){var d=a[c];d=="."?a.splice(c,1):d===".."?(a.splice(c,1),b++):b&&(a.splice(c,1),b--)}return a}function c(a,c){a=a.replace(/\/+$/g,"");var d=(c?c+"/../"+a:a).split("/");return b(d).join("/")}function d(a,c){if(!/^\w+:/.test(a)){var d=c.protocol+"//"+c.hostname;c.port&&c.port!==80&&(d+=":"+c.port);var e=c.pathname;a.charAt(0)==="/"?a=d+b(a.split("/")).join("/"):(e+=(e.charAt(e.length-1)==="/"?"":"/../")+a,a=d+b(e.split("/")).join("/"))}return a}function f(a,b,d){var g=a;if(a.charAt(0)==="."){d&&d.indexOf(b+"/index")!==-1&&(b+="/index");var h=a;a=c(a,b)}if(!f.modules.hasOwnProperty(a))throw new Error("Module not found "+JSON.stringify(g));var i=f.modules[a];if(i.exports===undefined){var j=function(b){return f(b,a,i.uri)};e(j,"main",f.main);var k=i.block;delete i.block,i.exports={},f.initFilter&&(k=f.initFilter(k)),k(j,i,i.exports)}return i.exports}function g(a,b,c){typeof b=="function"&&(c=b,b=null);var d={block:c};return e(d,"id",String(a)),b&&e(d,"uri",String(b)),f.modules[d.id]=d,d}var e;Object.defineProperty?e=function(a,b,c){Object.defineProperty(a,b,{value:c,writable:!1,enumerable:!0,configurable:!1})}:e=function(a,b,c){a[b]=c},f.modules={};var h=g("");return delete h.block,h.exports=a||{},e(f,"main",h),f.define=g,f},module,modules={},_require=Require();_require.define("runtime/runtime_inspect","runtime/runtime_inspect.js",function(a,b,c,d,e){function f(a){return a instanceof Array||Array.isArray(a)||a&&a!==Object.prototype&&f(a.prototype)}function g(a){var b=""+a;return a instanceof RegExp||typeof a=="function"&&a.constructor.name==="RegExp"&&a.compile&&a.test&&a.exec&&b.match(/^\/.*\/[gim]{0,3}$/)}function h(a){if(a instanceof Date)return!0;if(typeof a!="object")return!1;var b=Date.prototype&&Object.getOwnPropertyNames(Date.prototype),c=a.__proto__&&Object.getOwnPropertyNames(a.__proto__);return JSON.stringify(c)===JSON.stringify(b)}c.inspect=function(a,b,d,e){function k(a,d){if(a&&typeof a.inspect=="function"&&a!==c&&a.inspect!==c.inspect&&(!a.constructor||a.constructor.prototype!==a))return a.inspect(d);switch(typeof a){case"undefined":return j("undefined","undefined");case"string":var e=JSON.stringify(a).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");return j(e,"string");case"number":return j(""+a,"number");case"boolean":return j(""+a,"boolean")}if(a===null)return j("null","null");var l=Object.keys(a),m=b?Object.getOwnPropertyNames(a):l;if(typeof a=="function"&&m.length===0){if(g(a))return j(""+a,"regexp");var n=a.name?": "+a.name:"";return j("[Function"+n+"]","special")}if(h(a)&&m.length===0)return j(a.toUTCString(),"date");var o,p,q;f(a)?(p="Array",q=["[","]"]):(p="Object",q=["{","}"]);if(typeof a=="function"){var r=a.name?": "+a.name:"";o=g(a)?" "+a:" [Function"+r+"]"}else o="";h(a)&&(o=" "+a.toUTCString());if(m.length===0)return q[0]+o+q[1];if(d<0)return g(a)?j(""+a,"regexp"):j("[Object]","special");i.push(a);var s=m.map(function(b){var c,e;a.__lookupGetter__&&(a.__lookupGetter__(b)?a.__lookupSetter__(b)?e=j("[Getter/Setter]","special"):e=j("[Getter]","special"):a.__lookupSetter__(b)&&(e=j("[Setter]","special"))),l.indexOf(b)<0&&(c="["+b+"]"),e||(i.indexOf(a[b])<0?(d===null?e=k(a[b]):e=k(a[b],d-1),e.indexOf("\n")>-1&&(f(a)?e=e.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):e="\n"+e.split("\n").map(function(a){return"   "+a}).join("\n"))):e=j("[Circular]","special"));if(typeof c=="undefined"){if(p==="Array"&&b.match(/^\d+$/))return e;c=JSON.stringify(""+b),c.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(c=c.substr(1,c.length-2),c=j(c,"name")):(c=c.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),c=j(c,"string"))}return c+": "+e});i.pop();var t=0,u=s.reduce(function(a,b){return t++,b.indexOf("\n")>=0&&t++,a+b.length+1},0);return u>50?s=q[0]+(o===""?"":o+"\n ")+" "+s.join(",\n  ")+" "+q[1]:s=q[0]+o+" "+s.join(", ")+" "+q[1],s}var i=[],j=function(a,b){return a};return k(a,typeof d=="undefined"?2:d)}}),_require.define("runtime/es5_array","runtime/es5_array.js",function(a,b,c,d,e){Array.isArray||(Array.isArray=function(a){return a instanceof Array||Object.prototype.toString.call(a)==="[object Array]"}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c,d=this.length;for(c=+b||0;c<d;++c)if(this[c]===a)return c;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(a,b){var c=Math.min(this.length,+b||0);for(;c!==-1;--c)if(this[c]===a)return c;return-1}),Array.prototype.filter||(Array.prototype.filter=function(a,b){var c=[];for(var d=0;d<this.length;d++)a.call(b,this[d])&&c.push(this[d]);return c}),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){var c=this.length>>>0;for(var d=0;d<c;++d)d in this&&a.call(b,this[d],d,this)}),Array.prototype.every||(Array.prototype.every=function(a,b){var c=this.length>>>0;for(var d=0;d<c;++d)if(d in this&&!a.call(b,this[d],d,this))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(a,b){var c=this.length>>>0;for(var d=0;d<c;++d)if(d in this&&a.call(b,this[d],d,this))return!0;return!1}),Array.prototype.map||(Array.prototype.map=function(a,b){var c=this.length>>>0,d=new Array(c);for(var e=0;e<c;++e)d[e]=a.call(b,this[e],e,this);return d}),Array.prototype.reduce||(Array.prototype.reduce=function(a){var b=this.length>>>0,c=0,d;if(b===0&&arguments.length===1)throw new TypeError;if(arguments.length>=2)d=arguments[1];else do{if(c in this){d=this[c++];break}if(++c>=b)throw new TypeError}while(!0);for(;c<b;c++)c in this&&(d=a.call(null,d,this[c],c,this));return d}),Array.prototype.unshift||(Array.prototype.unshift=function(){this.reverse();var a=arguments.length;while(a--)this.push(arguments[a]);return this.reverse(),this.length})}),_require.define("runtime/es5_string","runtime/es5_string.js",function(a,b,c,d,e){String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^(?:\s|\u00A0)+/,"").replace(/(?:\s|\u00A0)+$/,"")}),String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^(?:\s|\u00A0)+/,"")}),String.prototype.trimRight||(String.prototype.trimRight=function(){return this.replace(/(?:\s|\u00A0)+$/,"")})}),_require.define("runtime/runtime_class","runtime/runtime_class.mv",function(a,b,c,d,e){(function(){"use strict";var a,b,d,e,f,g,h,i,j,k,l,m,k;return a=__move.runtime,b=a._MoveKWArgsT,d=a.Text,e=a.extend,f=a.create,g=a.print,h=a.repeat,i=a.after,j=a.JSON,k=a.__class,l=Object.prototype.constructor,m=typeof Object.prototype.__proto__=="object"?"__proto__":"prototype",c.__class=k=function(){var a,c,d,e,f;a=arguments[0];if(arguments.length===3){c=arguments[1],d=arguments[2];if((e=typeof d)!=="object"&&e!=="function")throw TypeError("unexpected type "+e+" of second argument (expected object)")}else if(arguments.length===2){d=arguments[1];if((e=typeof d)==="function")c=d,d=undefined;else if(e!=="object")throw TypeError("unexpected type "+e+" of first argument (expected object or function)")}return d&&d.__kw===b&&delete d.__kw,c&&(f=Object.create(c.prototype||null),d&&Object.keys(d).forEach(function(a){a!==null&&typeof a=="object"&&a.__kw===b&&(arguments.keywords=a,a=a.key);var c;if((c=d[a])!==undefined)return f[a]=c}),d=f),a.prototype=d||null,a.constructor=undefined,a},k.create=function(){var a,b,c,d;return a=arguments[0],b=arguments[1],c=Object.create(a.prototype),(d=c.constructor)&&d!==l&&typeof d=="function"?d.apply(c,b):typeof b[0]=="object"&&e(c,b[0]),c}})()}),_require.define("runtime/runtime_date","runtime/runtime_date.mv",function(a,b,c,d,e){(function(){"use strict";var a,b,c,d,e,f,g,h,i,j;a=__move.runtime,b=a._MoveKWArgsT,c=a.Text,d=a.extend,e=a.create,f=a.print,g=a.repeat,h=a.after,i=a.JSON,j=a.__class,Date.distantFuture===undefined&&(Date.distantFuture=new Date(359753450957352)),Date.distantPast===undefined&&(Date.distantPast=new Date(-621356868e5)),Date.nowUTC||(Date.nowUTC=function(){return(new Date).getUTCTime()}),Date.prototype.getUTCTime||(Date.prototype.getUTCTime=function(){return this.getTime()-this.getTimezoneOffset()});if(!Date.prototype.getUTCComponents)return Date.prototype.getUTCComponents=function(){return[this.getUTCFullYear(),this.getUTCMonth()+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds(),this.getUTCMilliseconds()]}})()}),_require.define("runtime/symbols","runtime/symbols.js",function(a,b,c,d,e){c._MoveKWArgsT=function f(a){return a.__kw=f,a}}),_require.define("runtime/runtime_array","runtime/runtime_array.js",function(a,b,c,d,e){typeof Array.prototype.unique!="function"&&(Array.prototype.unique=function(){var a=[],b,c,d=this.length;for(b=0;b<d;++b){for(c=b+1;c<d;++c)this[b]===this[c]&&(c=++b);a.push(this[b])}return a});if(typeof Array.prototype._move_setSlice!="function"){var f=Array.prototype.splice;Array.prototype._move_setSlice=function(a,b,c){var d;if(b!==undefined){if(typeof b!="number")throw new TypeError("Second argument must be a number");d=b-a}else d=this.length;return f.apply(this,[a,d].concat(c))}}}),_require.define("runtime/runtime_string","runtime/runtime_string.js",function(a,b,c,d,e){String.prototype.repeat||(String.prototype.repeat=function(a){s="";while(a--)s+=this;return s}),String.prototype.padLeft||(String.prototype.padLeft=function(a,b){return this.length>=a?this:String(b||" ").repeat(a-this.length)+this}),String.prototype.padRight||(String.prototype.padRight=function(a,b){return this.length>=a?this:this+String(b||" ").repeat(a-this.length)}),String.prototype.editDistance||(String.prototype.editDistance=function i(a){var b,c=(b=this.split("")).length,d=(a=a.split("")).length,e,f,g,h;if(!c&&!d)return Math.max(c,d);for(var i=[],e=c+1;e;i[--e]=[e]);for(e=d+1;i[0][--e]=e;);for(e=-1,g=b.length;++e<g;)for(f=-1,h=a.length;++f<h;)i[(e*=1)+1][(f*=1)+1]=Math.min(i[e][f+1]+1,i[e+1][f]+1,i[e][f]+(b[e]!=a[f]));return i[c][d]}),String.prototype.matchAll||(String.prototype.matchAll=function(a){"use strict",a instanceof RegExp?a.global||(a=new RegExp(a.source,"g")):a=new RegExp(a,"g");var b,c=[];while(b=a.exec(this))c.push(b);return c}),String.prototype.forEachMatch||(String.prototype.forEachMatch=function(a,b,c){return"use strict",c||(c=this),this.matchAll(a).forEach(b,c),c}),typeof String.prototype.toLocaleLowerCase=="function"&&(String.prototype.toLowerCase=String.prototype.toLocaleLowerCase),typeof String.prototype.toLocaleUpperCase=="function"&&(String.prototype.toUpperCase=String.prototype.toLocaleUpperCase)}),_require.define("runtime/runtime_move","runtime/runtime_move.mv",function(a,b,c,d,e){(function(){"use strict";var b,d,e,f,g,h,i,j,k,l,m,n,f,g,i,j,o,p,q;b=__move.runtime,d=b._MoveKWArgsT,e=b.Text,f=b.extend,g=b.create,h=b.print,i=b.repeat,j=b.after,k=b.JSON,l=b.__class,d=global.__move.runtime._MoveKWArgsT,global.__move.runtime=c,m=typeof process!="undefined"&&!!(typeof process.versions=="object"&&process.versions.node||process.pid),m||(a("./es5_object"),a("./es5_array"),a("./es5_date"),a("./es5_json")),a("./runtime_object"),a("./runtime_string"),a("./runtime_date"),a("./runtime_array"),Object.defineProperty?n=function(a,b,c){return a!==null&&typeof a=="object"&&a.__kw===d&&(arguments.keywords=a,c=a.value,b=a.name,a=a.obj),Object.defineProperty(a,b,{value:c,writable:!1,enumerable:!0,configurable:!1})}:n=function(a,b,c){return a!==null&&typeof a=="object"&&a.__kw===d&&(arguments.keywords=a,c=a.value,b=a.name,a=a.obj),a[b]=c},n(c,"_MoveKWArgsT",d),n(c,"Text",String),String.prototype.toText=String.prototype.toString,c.extend=f=function(a,b){a!==null&&typeof a=="object"&&a.__kw===d&&(arguments.keywords=a,b=a.body,a=a.object);var c;c=b===null?"undefined":typeof b;if(c==="object")Object.keys(b).forEach(function(c){c!==null&&typeof c=="object"&&c.__kw===d&&(arguments.keywords=c,c=c.key);var e;if((e=b[c])!==undefined&&e!==d)return a[c]=e});else if(c==="function")b.call(a);else if(c!=="undefined")throw new TypeError('"body" argument must be either an object or a function, not a '+c);return a},c.create=g=function(a,b){return a!==null&&typeof a=="object"&&a.__kw===d&&(arguments.keywords=a,b=a.body,a=a.prototype),f(Object.create(a),b)};if(typeof Object.inspect!="function")try{Object.inspect=a("util").inspect;if(typeof Object.inspect!="function")throw 1}catch(r){Object.inspect=a("./runtime_inspect").inspect}typeof console!="undefined"&&console.log?typeof window!="undefined"?(c.print=function w(){return w.consoleFun.apply(console,Array.prototype.slice.call(arguments))},c.print.consoleFun=console.log):c.print=console.log:c.print=function(){},c.repeat=i=function(a,b,c){a!==null&&typeof a=="object"&&a.__kw===d&&(arguments.keywords=a,c=a.block,b=a.every,a=a.times);var e,f;if(typeof a=="function"){for(;;)if(!a())break;return}if(typeof c!="function")return function(c){c!==null&&typeof c=="object"&&c.__kw===d&&(arguments.keywords=c,c=c.block);if(a!==undefined){for(e=0;e<a;++e)if(c(e)===!0)break}else{if(b!==undefined)return f=Object.create({},{cancel:{value:function(){return clearInterval(this.id)}}}),f.id=setInterval(function(){return c(f)},b),f;for(;;)if(!c())break}};if(a!==undefined){for(e=0;e<a;++e)if(c(e)===!0)break}else{if(b!==undefined)return f=Object.create({},{cancel:{value:function(){return clearInterval(this.id)}}}),f.id=setInterval(function(){return c(f)},b),f;for(;;)if(!c())break}},c.after=j=function(a,b){a!==null&&typeof a=="object"&&a.__kw===d&&(arguments.keywords=a,b=a.date,a=a.delay);if(a){if(typeof a!="number")throw new TypeError('"delay" argument must be a number')}else if(b){if(typeof b=="string"||typeof b=="number"){b=new Date(b);if(isNaN(b.getTime()))throw new Error('Invalid date/time passed for "date" argument')}else if(typeof b!="object"||!(b instanceof Date))throw new TypeError('"date" argument must be a Date object or a string');a=Math.max(0,b.getTime()-(new Date).getTime())}return function(b){return b!==null&&typeof b=="object"&&b.__kw===d&&(arguments.keywords=b,b=b.block),setTimeout(b,a)}},k=global.JSON,o=function(a,b){return a!==null&&typeof a=="object"&&a.__kw===d&&(arguments.keywords=a,b=a.parse,a=a.build),a!==undefined||b===undefined?k.stringify(a):k.parse(b)},o.parse=k.parse,o.stringify=k.stringify,c.JSON=o,p=function(a,b){a!==null&&typeof a=="object"&&a.__kw===d&&(arguments.keywords=a,b=a.propertyName,a=a.target);var c,e;return c=a[b],e=function(a,b){a!==null&&typeof a=="object"&&a.__kw===d&&(arguments.keywords=a,b=a.call,a=a.event);var e;return b?c.call(this,a,b):(e=this,function(b){return b!==null&&typeof b=="object"&&b.__kw===d&&(arguments.keywords=b,b=b.block),c.call(e,a,b)})},a[b]=e};try{q=a("events")}catch(r){}return q&&q.EventEmitter&&(p(q.EventEmitter.prototype,"addListener"),q.EventEmitter.prototype.on=q.EventEmitter.prototype.addListener),typeof process!="undefined"&&typeof process.on=="function"&&p(process,"on"),c.__class=a("./runtime_class").__class})()}),_require.define("runtime/es5_json","runtime/es5_json.js",function(require,module,exports,__filename,__dirname){var JSON=global.JSON;if(typeof JSON!="object"||typeof JSON.stringify!="function"||typeof JSON.parse!="function")JSON=global.JSON={},function(){function f(a){return a<10?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g=gap,h,i=b[a];i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(a)),typeof rep=="function"&&(i=rep.call(b,a,i));switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";gap+=indent,h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1)h[c]=str(c,i)||"null";return e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g,e}if(rep&&typeof rep=="object"){f=rep.length;for(c=0;c<f;c+=1)d=rep[c],typeof d=="string"&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))}else for(d in i)Object.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));return e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g,e}}"use strict",typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(a,b,c){var d;gap="",indent="";if(typeof c=="number")for(d=0;d<c;d+=1)indent+=" ";else typeof c=="string"&&(indent=c);rep=b;if(!b||typeof b=="function"||typeof b=="object"&&typeof b.length=="number")return str("",{"":a});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e=="object")for(c in e)Object.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()}),_require.define("runtime/es5_object","runtime/es5_object.js",function(a,b,c,d,e){var f=Array.prototype.slice.call;Object.create||(Object.create=function(a,b){var c=function(){b&&Object.defineProperties&&Object.defineProperties(this,b)};return c.prototype=a,new c}),Object.keys||(Object.keys=function h(a){var h=[];for(var b in a)h.push(b);return h}),Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(){return Object.keys.apply(this,f(arguments))}),Object.getOwnPropertyDescriptor||(Object.getOwnPropertyDescriptor=function(a,b){if(a.hasOwnProperty(b))return{configurable:!0,enumerable:!0,value:a[b],writable:!0}}),Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(a){return a in this}),Object.defineProperty||Object.prototype.__defineGetter__&&Object.prototype.__defineSetter__&&(Object.defineProperty=function(a,b,c){if(typeof c=="object")if(c.hasOwnProperty("value")){!a.__lookupGetter__(b)&&!a.__lookupSetter__(b)&&(a[b]=c.value);if(c.hasOwnProperty("get")||c.hasOwnProperty("set"))throw new TypeError("Object doesn't support this action")}else typeof c.get=="function"&&a.__defineGetter__(b,c.get),typeof c.set=="function"&&a.__defineSetter__(b,c.set);return a}),!Object.defineProperties&&Object.defineProperty&&(Object.defineProperties=function(a,b){for(var c in b)Object.defineProperty(a,c,b[c])})}),_require.define("runtime","runtime/index.js",function(a,b,c,d,e){a("./runtime_string"),global.__move||(global.__move={}),global.__move.runtime={_MoveKWArgsT:a("./symbols")._MoveKWArgsT},global.__move.runtime=a("./runtime_move")}),_require.define("runtime/runtime_object","runtime/runtime_object.js",function(a,b,c,d,e){if(!Object.prototype.forEach){var f=function(a,b){b!==null&&typeof b!="object"&&(b=this);var c=this;return Object.keys(this).forEach(function(d){a.call(b,d,c[d],c)}),this};Object.defineProperty&&Object.defineProperty(Object.prototype,"forEach",{value:f})}}),_require.define("runtime/es5_date","runtime/es5_date.js",function(a,b,c,d,e){Date.now||(Date.now=function(){return(new Date).getTime()}),Date.prototype.getTimezoneOffset||(Date.prototype.getTimezoneOffset=function(){if(this._timezoneOffsetStd===undefined){var a=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0,0),b=a.toGMTString(),c=new Date(b.substring(0,b.lastIndexOf(" ")-1));this._timezoneOffsetStd=(c-a)/6e4}return this._timezoneOffsetStd})}),_require.define("compiler/parser","compiler/parser.js",function(a,b,c,d,e){function s(a){return a=a.charCodeAt(0),a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122}function t(a){return s(a)||a=="$"||a=="_"}function u(a){return a=a.charCodeAt(0),a>=48&&a<=57}function v(a){if(k.test(a))return parseInt(a.substr(2),16);if(l.test(a))return parseInt(a.substr(1),8);if(m.test(a))return parseFloat(a)}function w(a,b,c,d){this.name="JS_Parse_Error",this.message=a,this.line=b,this.col=c,this.pos=d;try{({})()}catch(e){this.stack=this.message,e&&e.stack&&(this.stack+="\n"+e.stack.split(/[\r\n]/).slice(3).join("\n"))}}function x(a,b,c,d){throw new w(a,b,c,d)}function y(a,b,c){return a.type==b&&(c==null||a.value==c)}function A(a,b){function d(){return c.text.charAt(c.pos)}function e(a){var b=c.text.charAt(c.pos++);if(a&&!b)throw z;return b=="\n"?(c.newline_before=!0,++c.line,c.col=0):++c.col,b}function g(){return!c.peek()}function k(a,b){var d=c.text.indexOf(a,c.pos);if(b&&d==-1)throw z;return d}function l(){c.tokline=c.line,c.tokcol=c.col,c.tokpos=c.pos}function m(a,b,d){c.regex_allowed=a=="operator"&&!P(C,b)||a==="keyword"&&P(h,b)||a==="punc"&&P(p,b);var e={type:a,value:b,line:c.tokline,col:c.tokcol,pos:c.tokpos,nlb:c.newline_before};return d||(e.comments_before=c.comments_before,c.comments_before=[]),c.newline_before=!1,c.prev_token=e,e}function w(){while(P(o,d()))e()}function y(a){var b="",c=d(),f=0;while(c&&a(c,f++))b+=e(),c=d();return b}function A(a){x(a,c.tokline,c.tokcol,c.tokpos)}function B(a){var b=!1,c=!1,d=!1,e=a==".",f=y(function(f,g){return f=="x"||f=="X"?d?!1:d=!0:!!d||f!="E"&&f!="e"?f=="-"?c||g==0&&!a?!0:!1:f=="+"?c:(c=!1,f=="."?e?!1:e=!0:s(f)):b?!1:b=c=!0});a&&(f=a+f);var g=v(f);if(!isNaN(g))return m("num",g);A("Invalid syntax: "+f)}function D(){var a=e(!0);switch(a){case"n":return"\n";case"r":return"\r";case"t":return"\t";case"b":return"\b";case"v":return"";case"f":return"\f";case"0":return" ";case"x":return String.fromCharCode(E(2));case"u":return String.fromCharCode(E(4));default:return a}}function E(a){var b=0;for(;a>0;--a){var c=parseInt(e(!0),16);isNaN(c)&&A("Invalid hex-character pattern in string"),b=b<<4|c}return b}function F(){return N("Unterminated string constant",function(){var a=e(),b="";for(;;){var c=e(!0);if(c=="\\")c=D();else if(c==a)break;b+=c}return m("string",b)})}function G(){e();var a=k("\n"),b;return a==-1?(b=c.text.substr(c.pos),c.pos=c.text.length):(b=c.text.substring(c.pos,a),c.pos=a),m("comment1",b,!0)}function H(){return e(),N("Unterminated multiline comment",function(){var a=k("*/",!0),b=c.text.substring(c.pos,a),d=m("comment2",b,!0);return c.pos=a+2,c.line+=b.split("\n").length-1,c.newline_before=b.indexOf("\n")>=0,d})}function I(){return N("Unterminated regular expression",function(){var a=!1,b="",c,d=!1;while(c=e(!0))if(a)b+="\\"+c,a=!1;else if(c=="[")d=!0,b+=c;else if(c=="]"&&d)d=!1,b+=c;else{if(c=="/"&&!d)break;c=="\\"?a=!0:b+=c}var f=y(function(a){return P(r,a)});return m("regexp",[b,f])})}function J(a){function b(a){if(!d())return a;var c=a+d();return P(n,c)?(e(),b(c)):a}return m("operator",b(a||e()))}function K(){e();var a=c.regex_allowed;switch(d()){case"/":return c.comments_before.push(G()),c.regex_allowed=a,O();case"*":return c.comments_before.push(H()),c.regex_allowed=a,O()}return c.regex_allowed?I():J("/")}function L(){return e(),u(d())?B("."):m("punc",".")}function M(){var a=y(t);return P(f,a)?P(n,a)?m("operator",a):P(i,a)?m("atom",a):m("keyword",a):m("name",a)}function N(a,b){try{return b()}catch(c){if(c===z)A(a);else throw c}}function O(a){if(c.queued_tokens.length)return c.queued_tokens.shift();if(a)return I();w(),l();var b=d();if(!b)return m("eof");if(u(b))return B();if(b==='"'||b==="'")return F();if(P(q,b))return m("punc",e());if(b===".")return L();if(b==="/")return K();if(b==="#"){var f=c.regex_allowed;return c.comments_before.push(G()),c.regex_allowed=f,O()}if(b==="^")return e(),b=d(),b==="{"&&(c.queued_tokens.push(m("punc","(")),c.queued_tokens.push(m("punc",")"))),m("keyword","function");if(P(j,b))return J();if(b==="@"){e();var g=M(),h=m("name","this");return h.nlb=g.nlb,g.nlb=!1,c.queued_tokens.push(m("punc",".")),c.queued_tokens.push(g),h}if(t(b))return M();A("Unexpected character '"+b+"'")}typeof b!="object"&&(b={});var c={text:a.replace(/\r\n?|[\n\u2028\u2029]/g,"\n").replace(/^\uFEFF/,""),pos:0,tokpos:0,line:0,tokline:0,col:0,tokcol:0,newline_before:!1,regex_allowed:!1,comments_before:[],queued_tokens:[]};return O.context=function(a){return a&&(c=a),c},O}function H(a,b,c){this.name=a,this.start=b,this.end=c}function I(a,b,c){function f(a,b){return y(e.token,a,b)}function g(){return e.peeked||(e.peeked=e.input())}function h(){return e.peeked2?e.peeked2:(g(),e.peeked2=e.input())}function i(){return e.prev=e.token,e.peeked?(e.token=e.peeked,e.peeked2?(e.peeked=e.peeked2,e.peeked2=null):e.peeked=null):e.token=e.input(),e.token}function j(){return e.prev}function k(a,b,c,d){var f=e.input.context();x(a,b!=null?b:f.tokline,c!=null?c:f.tokcol,d!=null?d:f.tokpos)}function l(a,b){k(b,a.line,a.col)}function m(a){a==null&&(a=e.token),l(a,"Unexpected token: "+a.type+" "+JSON.stringify(a.value))}function n(a,b){if(f(a,b))return i();l(e.token,"Unexpected token: "+e.token.type+", expected "+a)}function o(a,b,c,d){if(f(a,b)||f(c,d))return i();l(e.token,"Unexpected token: "+e.token.type+", expected "+a+" or "+c)}function p(a){return n("punc",a)}function q(a,b){return o("punc",a,"punc",b)}function r(){return!b&&(e.token.nlb||f("eof")||f("punc","}"))}function s(){f("punc",";")?i():r()||m()}function t(){return M(arguments)}function u(){p("(");var a=br();return p(")"),a}function v(a,b,c){return a instanceof H?a:new H(a,b,c)}function z(){f("operator","/")&&(e.peeked2?(e.token=e.peeked2,e.peeked2=null):e.token=e.input(!0),e.peeked=null),d.automaticVarDeclarations&&e.token.type==="keyword"&&e.token.value==="var"&&m();switch(e.token.type){case"num":case"string":case"regexp":case"operator":case"atom":return L();case"name":return y(g(),"punc",":")?I(K(e.token.value,i,i)):L();case"punc":switch(e.token.value){case"{":return t("block",U());case"[":case"(":return L();case";":return i(),t("block");default:m()};case"keyword":switch(K(e.token.value,i)){case"break":return N("break");case"continue":return N("continue");case"debugger":return s(),t("debugger");case"do":return function(a){return n("keyword","while"),t("do",K(u,s),a)}(bs(w));case"for":return Q();case"function":return R(!0);case"if":return T();case"return":return e.in_function==0&&k("'return' outside of function"),t("return",f("punc",";")?(i(),null):r()?null:K(br,s));case"switch":return t("switch",u(),V());case"throw":return t("throw",K(br,s));case"try":return W();case"var":return K(Y,s);case"const":return K(Z,s);case"while":return t("while",u(),bs(w));case"with":k("'with' statement not allowed");case"import":return K($,s);case"export":return K(_,s);default:m()}}}function I(a){e.labels.push(a);var c=e.token,d=w();return b&&!P(F,d[0])&&m(c),e.labels.pop(),t("label",a,d)}function L(){return t("stat",K(br,s))}function N(a){var b=f("name")?e.token.value:null;return b!=null?(i(),O(b,e.labels)||k("Label "+b+" without matching loop or statement")):e.in_loop==0&&k(a+" not inside a loop or switch"),s(),t(a,b)}function Q(){var a=!1;(a=f("punc","("))&&i();var b=!d.automaticVarDeclarations&&f("keyword","var");b&&i();if(f("name")&&y(g(),"operator","in")){var c=e.token.value;i(),i();var h=br(!1,a);return a&&p(")"),t("for-in",b,c,h,bs(w))}var j=f("punc",";")?null:b?Y():br();p(";");var k=f("punc",";")?null:br();p(";");var l;return a?(l=f("punc",")")?null:br(),p(")")):l=f("punc","{")?null:br(!1,!1,!0),t("for",j,k,l,bs(w))}function S(a){var b=f("name")?K(e.token.value,i):null;a&&!b&&!e.in_function&&m(),p("(");var c=bg();return t(a?"defun":"function",b,c.names,function(){++e.in_function;var a=e.in_loop;e.in_loop=0;var b=U();return--e.in_function,e.in_loop=a,b}(),c.values)}function T(){var a=u(),b=w(),c;return f("keyword","else")&&(i(),c=w()),t("if",a,b,c)}function U(){p("{");var a=[];while(!f("punc","}"))f("eof")&&m(),a.push(w());return i(),a}function W(){var a=U(),b,c;if(f("keyword","catch")){i(),p("("),f("name")||k("Name expected");var d=e.token.value;i(),p(")"),b=[d,U()]}return f("keyword","finally")&&(i(),c=U()),!b&&!c&&k("Missing catch/finally blocks"),t("try",a,b,c)}function X(){var a=[];for(;;){f("name")||m();var b=e.token.value;i(),f("operator","=")?(i(),a.push([b,br(!1)])):a.push([b]);if(!f("punc",","))break;i()}return a}function Y(){return t("var",X())}function Z(){return t("const",X())}function $(){return t("import",X())}function _(){return t("export",X())}function ba(){var a=bb(!1),b;return f("punc","(")?(i(),b=bc(")")):b=[],bk(t("new",a,b),!0)}function bb(a,b){if(f("operator","new"))return i(),ba();if(f("operator")&&P(B,e.token.value))return bl("unary-prefix",K(e.token.value,i),bb(a,b));if(f("punc")){switch(e.token.value){case"(":return i(),bk(K(br(!1,a,b),J(p,")")),a);case"[":return i(),bk(be(),a,b);case"{":return i(),bk(bf(),a,b)}m()}if(f("keyword","function"))return i(),bk(R(!1),a);if(P(G,e.token.type)){var c=e.token.type=="regexp"?t("regexp",e.token.value[0],e.token.value[1]):t(e.token.type,e.token.value);return bk(K(c,i),a,b)}m()}function bc(a,b,c){var d=!0,e=[];while(!f("punc",a)){d?d=!1:p(",");if(b&&f("punc",a))break;f("punc",",")&&c?e.push(["atom","undefined"]):e.push(br(!1))}return i(),e}function bd(a,b,c,d){var e=!0,g=[];d||(d=0x10000000000000000);try{while(!f("punc",a)&&--d){e?e=!1:p(",");if(b&&f("punc",a))break;f("punc",",")&&c?g.push(["atom","undefined"]):g.push(br(!1))}i()}catch(h){if(String(h.message).indexOf("Unexpected token")!==0)throw h}return g}function be(){return t("array",bc("]",!b,!0))}function bf(){var a=!0,c=[];while(!f("punc","}")){a?a=!1:p(",");if(!b&&f("punc","}"))break;var d=e.token.type,g=bh();d!="name"||g!="get"&&g!="set"||!!f("punc",":")?(p(":"),c.push([g,br(!1)])):c.push([bi(),R(!1),g])}return i(),t("object",c)}function bg(){var a=!0,c,d,g=[],h={};while(!f("punc",")")){a?a=!1:p(",");if(!b&&f("punc",")"))break;c=e.token.type,d=bh(),g.push(d),f("punc",":")?(i(),h[d]=br(!1)):h[d]=undefined}return i(),{names:g,values:h}}function bh(){switch(e.token.type){case"num":case"string":return K(e.token.value,i)}return bi()}function bi(){switch(e.token.type){case"name":case"operator":case"keyword":case"atom":return K(e.token.value,i);default:m()}}function bj(a,b,c,d){if(f("operator","=")){i();var e=w();return bk(["call",["dot",a,"_move_setSlice"],[b||["num","0"],c||["name","undefined"],e[1]||["name","undefined"]]],d)}var g=[b||["num","0"]];return c&&g.push(c),bk(["call",["dot",a,"slice"],g],d)}function bk(a,b,c){if(f("punc","."))return i(),bk(t("dot",a,bi()),b,c);if(f("punc","[")){if(e.token.nlb)return a;i();var j=null,k=null;return f("punc",":")?i():j=K(br(!1,b,c),J(q,"]",":")),e.prev.value===":"?(f("punc","]")?i():k=K(br(!1,b,c),J(p,"]")),bj(a,j,k,b)):bk(t("sub",a,j),b,c)}if(b&&f("punc","("))return e.token.nlb?a:(i(),bk(t("call",a,bc(")")),b,c));if(b&&!c&&d.keywordArguments&&f("punc","{")){if(e.token.nlb)return a;i();var l;f("operator","&")?(i(),l=br(!1,b,c),p("}"),d.raw||(l=["call",["name","_MoveKWArgsT"],[l]])):(l=bf(),l[1].push(["__kw",["name","__Move_KWArgs__"]]));var m=a;return bk(t("call",m,[l]),b,c)}if(b&&f("operator")&&P(C,e.token.value))return e.token.nlb?a:K(J(bl,"unary-postfix",e.token.value,a),i);if(b&&!f("eof")&&!f("punc")&&!f("operator")&&(e.token.type!=="keyword"||e.token.value==="function")){if(e.token.nlb)return a;var n=[],o=!0,r,s,u;while(!f("punc",";")){if(o)o=!1;else{if(!f("punc",",")){r=!0;break}s=g();if(s.type==="name"&&(!(u=h())||u.type==="punc"&&u.value===":")){r=!0;break}if(s.type==="punc"&&s.value==="}"){r=!0;break}i()}n.push(br(!1,b,c))}return!r&&!f("punc",";")&&i(),e.token.nlb||f("punc",";")?t("call",a,n):bk(t("call",a,n),!0,c)}return a}function bl(a,b,c){return(b=="++"||b=="--")&&!bp(c)&&k("Invalid use of "+b+" operator"),t(a,b,c)}function bm(a,b,c,d){var g=f("operator")?e.token.value:null,h=g!=null?E[g]:null;c===undefined&&(c=!0);if(h!=null&&h>b){i();var j=bm(bb(c,d),h,c,d);return bm(t("binary",g,a,j),b,c,d)}return a}function bn(a,b){return a===undefined&&(a=!0),bm(bb(a,b),0,a,b)}function bo(a,b){var c=bn(a,b);if(f("operator","?")){i();var d=br(!1,a,b);return p(":"),t("conditional",c,d,br(!1,a,b))}return c}function bp(a){switch(a[0]){case"dot":case"sub":return!0;case"name":return a[1]!="this"}}function bq(a,b){var c=bo(a,b),d=e.token.value;if(f("operator")&&P(D,d)){if(bp(c))return i(),t("assign",D[d],c,bq());k("Invalid assignment")}return c}function br(a,b,c){arguments.length==0&&(a=!0);var d=bq(b,c);return a&&f("punc",",")?(i(),t("seq",d,br())):d}function bs(a){try{return++e.in_loop,a()}finally{--e.in_loop}}var d={};typeof b=="object"&&(d=b,b=d.strictMode,c=d.embedTokens);var e={input:typeof a=="string"?A(a,d):a,token:null,prev:null,peeked:null,in_function:0,in_loop:0,labels:[]};e.token=i();var w=c?function(){var a=e.token,b=z.apply(this,arguments);return b[0]=v(b[0],a,j()),b}:z,R=c?function(){var a=j(),b=S.apply(this,arguments);return b[0]=v(b[0],a,j()),b}:S,V=J(bs,function(){p("{");var a=[],b=null;while(!f("punc","}"))f("eof")&&m(),f("keyword","case")?(i(),b=[],a.push([br(),b]),p(":")):f("keyword","default")?(i(),p(":"),b=[],a.push([null,b])):(b||m(),b.push(w()));return i(),a});return t("toplevel",function(a){while(!f("eof"))a.push(w());return a}([]))}function J(a){var b=M(arguments,1);return function(){return a.apply(this,b.concat(M(arguments)))}}function K(a){a instanceof Function&&(a=a());for(var b=1,c=arguments.length;--c>0;++b)arguments[b]();return a}function L(a){var b={};for(var c=0;c<a.length;++c)b[a[c]]=!0;return b}function M(a,b){return Array.prototype.slice.call(a,b==null?0:b)}function N(a){return a.split("")}function O(a,b){for(var c=b.length;--c>=0;)if(b[c]===a)return!0;return!1}function P(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var f=L(["break","case","catch","const","continue","default","delete","do","else","finally","for","function","if","in","instanceof","new","return","switch","throw","try","typeof","var","void","while","with","import","export","xor"]);c.KEYWORDS=f;var g=L(["abstract","boolean","byte","char","class","debugger","double","enum","extends","final","float","goto","implements","int","interface","long","native","package","private","protected","public","short","static","super","synchronized","throws","transient","volatile"]);c.RESERVED_WORDS=g;var h=L(["return","new","delete","throw","else","case"]),i=L(["false","null","true","undefined"]),j=L(N("+-*&%=<>!?|~")),k=/^0x[0-9a-f]+$/i,l=/^0[0-7]+$/,m=/^\d*\.?\d*(?:e[+-]?\d*(?:\d\.?|\.?\d)\d*)?$/i,n=L(["in","instanceof","typeof","new","void","delete","++","--","+","-","!","~","&","|","*","/","%",">>","<<",">>>","<",">","<=",">=","==","===","!=","!==","?","=","+=","-=","/=","*=","%=",">>=","<<=",">>>=","%=","|=","&=","&&","||","xor"]),o=L(N(" \n\r\t")),p=L(N("[{}(,.;:")),q=L(N("[]{}(),;:")),r=L(N("gmsiy"));w.prototype.toString=function(){return this.message+" (line: "+this.line+", col: "+this.col+", pos: "+this.pos+")"+"\n\n"+this.stack};var z={},B=L(["typeof","void","delete","--","++","!","~","-","+"]),C=L(["--","++"]),D=function(a,b,c){while(c<a.length)b[a[c]]=a[c].substr(0,a[c].length-1),c++;return b}(["+=","-=","/=","*=","%=",">>=","<<=",">>>=","|=","xor=","&="],{"=":!0},0),E=function(a,b){for(var c=0,d=1;c<a.length;++c,++d){var e=a[c];for(var f=0;f<e.length;++f)b[e[f]]=d}return b}([["||"],["&&"],["|"],["xor"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"]],{}),F=L(["for","do","while","switch"]),G=L(["atom","num","string","regexp","name"]);H.prototype.toString=function(){return this.name},c.tokenizer=A,c.parse=I,c.slice=M,c.curry=J,c.member=O,c.array_to_hash=L,c.PRECEDENCE=E,c.KEYWORDS_ATOM=i,c.RESERVED_WORDS=g,c.KEYWORDS=f,c.ATOMIC_START_TOKEN=G,c.OPERATORS=n,c.is_alphanumeric_char=s,c.is_identifier_char=t}),_require.define("compiler/ast-mutators","compiler/ast-mutators.js",function(a,b,c,d,e){var f=a("./parser"),g=a("./process");c.add_implicit_returns=function(a){var b=g.ast_walker(),c=g.MAP,d;d=function h(a){if(!a)return a;var b=a[0],c;if(b==="stat")a[0]="return";else{if(b==="defun")return a[0]="function",["return",a];if(b==="if")for(c=2;c<a.length;++c)a[c]=h(a[c]);else if(b==="block"){var d=a[1];d&&d.length!==0&&(d[d.length-1]=h(d[d.length-1]))}}return a};var e=function(a,e,f,g){return f.length&&(f[f.length-1]=d(f[f.length-1])),[this[0],a,e.slice(),c(f,b.walk),g]},f=b.with_walkers({defun:e,"function":e},function(){return b.walk(a)});return f},c.first_time_var_delc=function l(a,b){function j(a){h=new e(h),h.vars=[];var b=h.body=a();if(h.vars.length){var c=b[0]==="toplevel"?b[1]:b,f=["var",d(h.vars,function(a){return[a]})];c.splice(0,0,f)}return h=h.parent,b}function k(a){return h.define(a)}function l(a,b,e,f){return[this[0],k(a),b,j(function(){return d(b,k),d(e,c.walk)}),f]}var c=g.ast_walker(),d=g.MAP,e=g.Scope,h=null,i=f.slice;return b&&(h=new e,h.names=f.array_to_hash(b)),j(function(){var b=c.with_walkers({defun:l,"function":l,"var":function(a){return[this[0],d(a,function(a){k(a[0]);var b=[a[0]];return a.length>1&&(b[1]=c.walk(a[1])),b})]},"import":function(a){d(a,function(a){k(a[0]),h.vars.push(a[0])})},"export":function(a){d(a,function(a){k(a[0]),h.vars.push(a[0])})},"const":function(a){d(a,function(a){k(a[0])})},assign:function(a,b,d){if(b[0]==="name"){var e=b[1],f=h.has(e);f||(h.vars.push(e),k(e))}return[this[0],a,c.walk(b),c.walk(d)]},"for-in":function(a,b,d,e){return a?[this[0],c.walk(a),c.walk(b),c.walk(d),c.walk(e)]:(h.has(b)||(h.vars.push(b),k(b)),[this[0],a,b,c.walk(d),c.walk(e)])}},function(){return c.walk(a)});return b})};var h=/^[_\$a-z][_\$\w\d]*$/i,i=function(a){var b;if(a[0]==="name")b=a[1];else if(a[0]==="dot")b=a[a.length-1];else if(a[0]==="sub"){a=a[a.length-1];if(a[0]==="string"){b=a[1];if(f.KEYWORDS[b]||f.RESERVED_WORDS[b]||!h.test(b))b=undefined}else b=a}return b};c.named_lambda_assignments=function(a){var b=g.ast_walker(),c=g.MAP,d=b.with_walkers({"export":function(a){return[this[0],c(a,function(a){var c=[a[0]];return a.length>1&&(a[1]&&a[1][0]==="function"&&!a[1][1]&&(a[1][1]=a[0]),c[1]=b.walk(a[1])),c})]},assign:function(a,c,d){if(Array.isArray(d)&&d[0]==="function"&&!d[1]){var e=i(c);typeof e=="string"&&(d[1]=e)}return[this[0],a,b.walk(c),b.walk(d)]}},function(){return b.walk(a)});return d},c.enforce_strict_eq_ops=function(a){var b=g.ast_walker(),c=g.MAP;return b.with_walkers({binary:function(a,c,d){return a==="=="?a="===":a==="!="&&(a="!=="),[this[0],a,b.walk(c),b.walk(d)]}},function(){return b.walk(a)})},c.enable_keyword_arguments=function(a,b){var c=g.ast_walker(),d=g.MAP;typeof b!="object"&&(b={});var e=b.raw?"true":"_MoveKWArgsT";return c.with_walkers({"function":function(a,b,f,g){if(b.length){var h,i,j,k=["seq"],l=b[0],m=[null],n=["binary","&&",["binary","!==",["name",l],["name","null"]],["binary","&&",["binary","===",["unary-prefix","typeof",["name",l]],["string","object"]],["binary","===",["dot",["name",l],"__kw"],["name",e]]]];k.push(["assign",!0,["dot",["name","arguments"],"keywords"],["name",l]]);for(h=b.length;--h!==-1;)i=b[h],j=g&&g[i],k.push(["assign",!0,["name",i],["dot",["name",l],i]]),j&&m.push(["if",["binary","===",["name",i],["name","undefined"]],["stat",["assign",!0,["name",i],j]]]);m[0]=["stat",["binary","&&",n,k]],f=m.concat(f)}return[this[0],a,b,d(f,c.walk),g]},call:function(a,b){if(b.length===1&&b[0][0]==="object"){var f,g=b[0][1],h=[];for(var i=g.length;--i!==-1;)f=g[i],f[0]==="__kw"&&f[1]&&f[1][1]==="__Move_KWArgs__"&&h.push(i);if(h.length){while(h.length>1)delete g[h.pop()];g[h.pop()]=["__kw",["name",e]]}}return[this[0],c.walk(a),d(b,c.walk)]}},function(){return c.walk(a)})};var j=function(a,b){var c,d,e;if(a&&a[0]==="object"){c=a[1];for(e=0;e<c.length;e++){d=c[e];if(d[0]==="__kw"&&d[1][0]==="name"&&(b.raw&&d[1][1]==="true"||!b.raw&&d[1][1]==="_MoveKWArgsT"))return c.splice(e,1),!0}}return!1};c.enable_class_rt_function=function(a,b){var c=g.ast_walker(),d=g.MAP,e;return c.with_walkers({name:function(a){return a==="class"&&(a="__class"),[this[0],a]},assign:function(a,b,d){var f=i(b);return e=typeof f=="string"?f:undefined,r=[this[0],a,c.walk(b),c.walk(d)],e=undefined,r},call:function(a,f){var g,h,i,k,l;return a[0]==="name"&&a[1]==="class"&&e&&(g=e||"__UntitledClass",f.unshift(["assign",!0,["name",g],["function",g,[],[["return",["call",["dot",["name","__class"],"create"],[["name",g],["name","arguments"]]]]]]]),j(f[1],b)),[this[0],c.walk(a),d(f,c.walk)]}},function(){return c.walk(a)})}}),_require.define("compiler/preprocessors/ehtml","compiler/preprocessors/ehtml.mv",function(a,b,c,d,e){(function(){"use strict";var a,b,d,e,f,g,h,i,j,k,l,m;a=__move.runtime,b=a._MoveKWArgsT,d=a.Text,e=a.extend,f=a.create,g=a.print,h=a.repeat,i=a.after,j=a.JSON,k=a.__class,__move.EHTML=l=function n(a){a!==null&&typeof a=="object"&&a.__kw===b&&(arguments.keywords=a,a=a.html);var c;return n.spawnerElement||(n.spawnerElement=document.createElement("div")),n.spawnerElement.innerHTML=a,c=n.spawnerElement.firstChild,c.toString=function(){return a},c},l.classNameWrapper=function(a){return a!==null&&typeof a=="object"&&a.__kw===b&&(arguments.keywords=a,a=a.className),a=" "+a,function(c){c!==null&&typeof c=="object"&&c.__kw===b&&(arguments.keywords=c,c=c.html);var d;return d=__move.EHTML(c),d.className+=a,d}},c.process=m=function(a,c){a!==null&&typeof a=="object"&&a.__kw===b&&(arguments.keywords=a,c=a.options,a=a.src);var d,e,f,g,h;return d=0,e=function(c){c!==null&&typeof c=="object"&&c.__kw===b&&(arguments.keywords=c,c=c.endch);var e,f;e=null;while(f=a[d++]){if(f===c&&e!=="\\")break;e=f}},f=function j(){var c,e,f,h,i,j,k,l;c=0,e=d-1,f="<",h=[];while(f==="<"){i=j=null;while((f=a[d++])&&f!==">")i===null&&(i=f),f==="{"&&j!=="\\"&&(h.push([!0,e,d-1]),e=d,k=g(!0),h.push([!1,k]),e=d),j=f;if(i==="/"){--c;if(c<0)throw Error("EHTML: Premature termination")}else j!=="/"&&++c;if(!f||c===0)break;while((f=a[d++])&&f!=="<")f==="{"&&j!=="\\"&&(h.push([!0,e,d-1]),e=d,k=g(!0),h.push([!1,k]),e=d),j=f}return h.push([!0,e,d]),l="",h.forEach(function(c){c!==null&&typeof c=="object"&&c.__kw===b&&(arguments.keywords=c,c=c.range);var d;return c[0]?(d=a.substring(c[1],c[2]),d=d.replace(/\n/g,"\\n"),d=d.replace(/\t/g,"\\t"),d=d.replace(/'/g,"\\'")):d="'+("+c[1]+")+'",l+=d}),l="EHTML('"+l+"')",l},g=function k(c){c!==null&&typeof c=="object"&&c.__kw===b&&(arguments.keywords=c,c=c.isDeep);var g,h,i,j,k,l,m,n,o;g="",h=0,i=1,j=h,k=null,l=1;while(m=a[d++]){n=!1;switch(m){case" ":case"\n":case"\r":case"\t":g+=m;break;case'"':o=d,e('"'),g+=a.substring(o-1,d);break;case"'":o=d,e("'"),g+=a.substring(o-1,d);break;case"<":j===i?(j=h,g+=m):g+=f();break;default:g+=m,n=!0}if(n){if(c&&k!=="\\")if(m==="{")++l;else if(m==="}"&&--l===0){g=g.substr(0,g.length-1);break}m.match(/[a-z0-9_\)\}]/i)?j=i:j=h}k=m}return g},h="EHTML = __move.EHTML\n"+g(),h}})()}),_require.define("compiler/squeeze-more","compiler/squeeze-more.js",function(a,b,c,d,e){function l(a){var b=g.ast_walker(),c=b.walk;return b.with_walkers({call:function(a,b){if(a[0]=="dot"&&a[2]=="toString"&&b.length==0)return["binary","+",a[1],["string",""]]}},function(){return c(a)})}var f=a("./parser"),g=a("./process"),h=f.slice,i=f.member,j=f.PRECEDENCE,k=f.OPERATORS;c.ast_squeeze_more=l}),_require.define("compiler/process","compiler/process.js",function(a,b,c,d,e){function k(a){function b(a){return[this[0],I(a,function(a){var b=[a[0]];return a.length>1&&(b[1]=f(a[1])),b})]}function f(a){if(!a)return null;try{e.push(a);var b=a[0],f=d[b];if(f){var g=f.apply(a,a.slice(1));if(g!=null)return g}return f=c[b],f.apply(a,a.slice(1))}finally{e.pop()}}function h(a,b){var c={},e;for(e in a)H(a,e)&&(c[e]=d[e],d[e]=a[e]);var f=b();for(e in c)H(c,e)&&(c[e]?d[e]=c[e]:delete d[e]);return f}var c={string:function(a){return[this[0],a]},num:function(a){return[this[0],a]},name:function(a){return[this[0],a]},toplevel:function(a){return[this[0],I(a,f)]},block:function(a){var b=[this[0]];return a!=null&&b.push(I(a,f)),b},"var":b,"const":b,"import":b,"export":b,"try":function(a,b,c){return[this[0],I(a,f),b!=null?[b[0],I(b[1],f)]:null,c!=null?I(c,f):null]},"throw":function(a){return[this[0],f(a)]},"new":function(a,b){return[this[0],f(a),I(b,f)]},"switch":function(a,b){return[this[0],f(a),I(b,function(a){return[a[0]?f(a[0]):null,I(a[1],f)]})]},"break":function(a){return[this[0],a]},"continue":function(a){return[this[0],a]},conditional:function(a,b,c){return[this[0],f(a),f(b),f(c)]},assign:function(a,b,c){return[this[0],a,f(b),f(c)]},dot:function(a){return[this[0],f(a)].concat(g(arguments,1))},call:function(a,b){return[this[0],f(a),I(b,f)]},"function":function(a,b,c,d){return[this[0],a,b.slice(),I(c,f),d]},defun:function(a,b,c,d){return[this[0],a,b.slice(),I(c,f),d]},"if":function(a,b,c){return[this[0],f(a),f(b),f(c)]},"for":function(a,b,c,d){return[this[0],f(a),f(b),f(c),f(d)]},"for-in":function(a,b,c,d){return a?[this[0],f(a),f(b),f(c),f(d)]:[this[0],a,b,f(c),f(d)]},"while":function(a,b){return[this[0],f(a),f(b)]},"do":function(a,b){return[this[0],f(a),f(b)]},"return":function(a){return[this[0],f(a)]},binary:function(a,b,c){return[this[0],a,f(b),f(c)]},"unary-prefix":function(a,b){return[this[0],a,f(b)]},"unary-postfix":function(a,b){return[this[0],a,f(b)]},sub:function(a,b){return[this[0],f(a),f(b)]},object:function(a){return[this[0],I(a,function(a){return a.length==2?[a[0],f(a[1])]:[a[0],f(a[1]),a[2]]})]},regexp:function(a,b){return[this[0],a,b]},array:function(a){return[this[0],I(a,f)]},stat:function(a){return[this[0],f(a)]},seq:function(){return[this[0]].concat(I(g(arguments),f))},label:function(a,b){return[this[0],a,f(b)]},"with":function(a,b){return[this[0],f(a),f(b)]},atom:function(a){return[this[0],a]}},d={},e=[];return{walk:f,with_walkers:h,parent:function(){return e[e.length-2]},stack:function(){return e}}}function l(a){this.names={},this.mangled={},this.rev_mangled={},this.cname=-1,this.refs={},this.uses_with=!1,this.uses_eval=!1,this.parent=a,this.children=[],a?(this.level=a.level+1,a.children.push(this)):this.level=0}function n(a){function f(a){b=new l(b);var c=b.body=a();return c.scope=b,b=b.parent,c}function g(a){return b.define(a)}function h(a){b.refs[a]=!0}function i(a,b,c,e){return[this[0],g(a),b,f(function(){return I(b,g),I(c,d)}),e]}var b=null,c=k(),d=c.walk,e=[];return f(function(){function j(a,b){for(b=a.children.length;--b>=0;)j(a.children[b]);for(b in a.refs)if(H(a.refs,b))for(var c=a.has(b),d=a;d;d=d.parent){d.refs[b]=c;if(d===c)break}}var f=c.with_walkers({"function":i,defun:i,"with":function(a,c){for(var d=b;d;d=d.parent)d.uses_with=!0},"var":function(a){I(a,function(a){g(a[0])})},"const":function(a){I(a,function(a){g(a[0])})},"try":function(a,b,c){if(b!=null)return[this[0],I(a,d),[g(b[0]),I(b[1],d)],c!=null?I(c,d):null]},name:function(a){a=="eval"&&e.push(b),h(a)},"for-in":function(a,b){a?g(b):h(b)}},function(){return d(a)});return I(e,function(a){if(!a.has("eval"))while(a)a.uses_eval=!0,a=a.parent}),j(b),f})}function o(a,b){function f(a,c){return!b&&!e.parent?a:e.get_mangled(a,c)}function g(a,b,c,e){return a&&(a=f(a)),c=h(c.scope,function(){return b=I(b,function(a){return f(a)}),I(c,d)}),[this[0],a,b,c,e]}function h(a,b){var c=e;e=a;for(var d in a.names)H(a.names,d)&&f(d,!0);var g=b();return g.scope=a,e=c,g}function i(a){return[this[0],I(a,function(a){return[f(a[0]),d(a[1])]})]}var c=k(),d=c.walk,e;return c.with_walkers({"function":g,defun:function(){var a=g.apply(this,arguments);switch(c.parent()[0]){case"toplevel":case"function":case"defun":return I.at_top(a)}return a},"var":i,"const":i,name:function(a){return[this[0],f(a)]},"try":function(a,b,c){return[this[0],I(a,d),b!=null?[f(b[0]),I(b[1],d)]:null,c!=null?I(c,d):null]},toplevel:function(a){var b=this;return h(b.scope,function(){return[b[0],I(a,d)]})},"for-in":function(a,b,c,e){return[this[0],a,f(b),d(c),d(e)]}},function(){return d(n(a))})}function q(a,b){return C(a).length>C(b[0]=="stat"?b[1]:b).length?b:a}function r(a){return a[0]=="block"&&a[1]&&a[1].length>0?a[1][a[1].length-1]:a}function s(a){if(a){a=r(a);if(a[0]=="return"||a[0]=="break"||a[0]=="continue"||a[0]=="throw")return!0}}function t(a){return a[0]=="unary-prefix"&&h(a[1],["!","delete"])||a[0]=="binary"&&h(a[1],["in","instanceof","==","!=","===","!==","<","<=",">=",">"])||a[0]=="binary"&&h(a[1],["&&","||"])&&t(a[2])&&t(a[3])||a[0]=="conditional"&&t(a[2])&&t(a[3])||a[0]=="assign"&&a[1]===!0&&t(a[3])||a[0]=="seq"&&t(a[a.length-1])}function u(a,b,c){return a[0]=="unary-prefix"&&a[1]=="!"?c?["conditional",a[2],c,b]:["binary","||",a[2],b]:c?["conditional",a,b,c]:["binary","&&",a,b]}function v(a){return!a||a[0]=="block"&&(!a[1]||a[1].length==0)}function w(a){return a[0]=="string"||a[0]=="unary-prefix"&&a[1]=="typeof"||a[0]=="binary"&&a[1]=="+"&&(w(a[2])||w(a[3]))}function y(a){v(a)||p("Dropping unreachable code: "+C(a,!0))}function z(a,b){function f(a){var c=["unary-prefix","!",a];switch(a[0]){case"unary-prefix":return a[1]=="!"&&t(a[2])?a[2]:c;case"seq":return a=g(a),a[a.length-1]=f(a[a.length-1]),a;case"conditional":return q(c,["conditional",a[1],f(a[2]),f(a[3])]);case"binary":var d=a[1],e=a[2],h=a[3];if(!b.keep_comps)switch(d){case"<=":return["binary",">",e,h];case"<":return["binary",">=",e,h];case">=":return["binary","<",e,h];case">":return["binary","<=",e,h]}switch(d){case"==":return["binary","!=",e,h];case"!=":return["binary","==",e,h];case"===":return["binary","!==",e,h];case"!==":return["binary","===",e,h];case"&&":return q(c,["binary","||",f(e),f(h)]);case"||":return q(c,["binary","&&",f(e),f(h)])}}return c}function i(a,b){var c=e;e=a;var d=b();return d.scope=a,e=c,d}function j(a){return a!=null&&a[0]=="block"&&a[1]&&(a[1].length==1?a=a[1][0]:a[1].length==0&&(a=["block"])),a}function l(a,b,c,e){return[this[0],a,b,i(c.scope,function(){return m(I(c,d),"lambda")}),e]}function m(a,c){return a=a.reduce(function(a,b){return b&&(b[0]=="block"?b[1]&&a.push.apply(a,b[1]):a.push(b)),a},[]),a=function(b,c){return a.forEach(function(a){c&&(a[0]=="var"&&c[0]=="var"||a[0]=="const"&&c[0]=="const")?c[1]=c[1].concat(a[1]):(b.push(a),c=a)}),b}([]),b.dead_code&&(a=function(c,d){return a.forEach(function(a){d?h(a[0],["function","defun","var","const"])?c.push(a):b.no_warnings||y(a):(c.push(a),h(a[0],["return","throw","break","continue"])&&(d=!0))}),c}([])),b.make_seqs&&(a=function(b,c){return a.forEach(function(a){c&&c[0]=="stat"&&a[0]=="stat"?c[1]=["seq",c[1],a[1]]:(b.push(a),c=a)}),b}([])),c=="lambda"&&(a=function(b,c,d){while(b<a.length){d=a[b++];if(d[0]=="if"&&!d[3]){if(d[2][0]=="return"&&d[2][1]==null){c.push(o(f(d[1]),["block",a.slice(b)]));break}var e=r(d[2]);if(e[0]=="return"&&e[1]==null){c.push(o(d[1],["block",d[2][1].slice(0,-1)],["block",a.slice(b)]));break}}c.push(d)}return c}(0,[])),a}function o(a,b,c){return x(a,function(a,d){return d?(y(c),b):(y(b),c)},function(){return p(a,b,c)})}function p(a,b,c){a=d(a),b=d(b),c=d(c),v(b)?(a=f(a),b=c,c=null):v(c)?c=null:function(){var d=C(a),e=f(a),g=C(e);if(g.length<d.length){var h=b;b=c,c=h,a=e}}();if(v(c)&&v(b))return["stat",a];var e=["if",a,b,c];return b[0]=="if"&&v(b[3])&&v(c)?e=q(e,d(["if",["binary","&&",a,b[1]],b[2]])):b[0]=="stat"?c?c[0]=="stat"&&(e=q(e,["stat",u(a,b[1],c[1])])):e=q(e,["stat",u(a,b[1])]):c&&b[0]==c[0]&&(b[0]=="return"||b[0]=="throw")&&b[1]&&c[1]?e=q(e,[b[0],u(a,b[1],c[1])]):c&&s(b)?(e=[["if",a,b]],c[0]=="block"?c[1]&&(e=e.concat(c[1])):e.push(c),e=d(["block",e])):b&&s(c)&&(e=[["if",f(a),c]],b[0]=="block"?b[1]&&(e=e.concat(b[1])):e.push(b),e=d(["block",e])),e}function w(a,b){return x(a,function(a,c){return c?["for",null,null,null,d(b)]:(y(b),["block"])})}b=F(b,{make_seqs:!0,dead_code:!0,keep_comps:!0,no_warnings:!1});var c=k(),d=c.walk,e;return c.with_walkers({sub:function(a,b){if(b[0]=="string"){var c=b[1];if(G(c))return["dot",d(a),c]}},"if":o,toplevel:function(a){return["toplevel",i(this.scope,function(){return m(I(a,d))})]},"switch":function(a,b){var c=b.length-1;return["switch",d(a),I(b,function(a,b){var e=m(I(a[1],d));if(b==c&&e.length>0){var f=e[e.length-1];f[0]=="break"&&!f[1]&&e.pop()}return[a[0]?d(a[0]):null,e]})]},"function":function(){var a=l.apply(this,arguments);return a[1]&&!H(e.refs,a[1])&&(a[1]=null),a},defun:l,block:function(a){if(a)return j(["block",m(I(a,d))])},binary:function(a,b,c){return x(["binary",a,d(b),d(c)],function(a){return q(d(a),this)},function(){return this})},conditional:function(a,b,c){return u(d(a),d(b),d(c))},"try":function(a,b,c){return["try",m(I(a,d)),b!=null?[b[0],m(I(b[1],d))]:null,c!=null?m(I(c,d)):null]},"unary-prefix":function(a,b){b=d(b);var c=["unary-prefix",a,b];return a=="!"&&(c=q(c,f(b))),x(c,function(a,b){return d(a)},function(){return c})},name:function(a){switch(a){case"true":return["unary-prefix","!",["num",0]];case"false":return["unary-prefix","!",["num",1]]}},"new":function(a,b){if(a[0]=="name"&&a[1]=="Array"&&!e.has("Array"))return b.length!=1?["array",b]:["call",["name","Array"],b]},call:function(a,b){if(a[0]=="name"&&a[1]=="Array"&&b.length!=1&&!e.has("Array"))return["array",b]},"while":w,"do":w},function(){return d(n(a))})}function B(a){var b=0,c=0;return a=a.replace(/[\\\b\f\n\r\t\x22\x27]/g,function(a){switch(a){case"\\":return"\\\\";case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case'"':return++b,'"';case"'":return++c,"'"}return a}),b>c?"'"+a.replace(/\x27/g,"\\'")+"'":'"'+a.replace(/\x22/g,'\\"')+'"'}function C(a,b){function l(a){return a==null&&(a=""),b&&(a=E(" ",b.indent_start+c*b.indent_level)+a),a}function m(a,b){b==null&&(b=1),c+=b;try{return a.apply(null,g(arguments,1))}finally{c-=b}}function n(a){if(b)return a.join(" ");var c=[];for(var d=0;d<a.length;++d){var e=a[d+1];c.push(a[d]),e&&(/[a-z0-9_\x24]$/i.test(a[d].toString())&&/^[a-z0-9_\x24]/i.test(e.toString())||/[\+\-]$/.test(a[d].toString())&&/^[\+\-]/.test(e.toString()))&&c.push(" ")}return c.join("")}function o(a){return a.join(","+e)}function p(a){var b=K(a);for(var c=1;c<arguments.length;++c){var d=arguments[c];if(d instanceof Function&&d(a)||a[0]==d)return"("+b+")"}return b}function q(a){if(a.length==1)return a[0];if(a.length==2){var b=a[1];return a=a[0],a.length<=b.length?a:b}return q([a[0],q(a.slice(1))])}function r(a){if(a[0]=="function"){var b=g(J),c=b.pop(),d=b.pop();while(d){if(d[0]=="stat")return!0;if(d[0]=="seq"&&d[1]===c||d[0]=="call"&&d[1]===c||d[0]=="binary"&&d[2]===c)c=d,d=b.pop();else return!1}}return!H(A,a[0])}function s(a){var b=a.toString(10),c=[b.replace(/^0\./,".")],d;return Math.floor(a)===a?(c.push("0x"+a.toString(16).toLowerCase(),"0"+a.toString(8)),(d=/^(.*?)(0+)$/.exec(a))&&c.push(d[1]+"e"+d[2].length)):(d=/^0?\.(0+)(.*)$/.exec(a))&&c.push(d[2]+"e-"+(d[1].length+d[2].length),b.substr(b.indexOf("."))),q(c)}function u(a){if(a[0]=="do")return K(["block",[a]]);var b=a;for(;;){var c=b[0];if(c=="if"){if(!b[3])return K(["block",[a]]);b=b[3]}else if(c=="while"||c=="do")b=b[2];else if(c=="for"||c=="for-in")b=b[4];else break}return K(a)}function w(a,c,d,e,f){var g=f||"function";return a?g+=" "+x(a):b&&(g+=" "),g+="("+o(I(c,x))+")",n([g,C(d)])}function x(a){return a.toString()}function y(a){for(var c=[],d=a.length-1,e=0;e<=d;++e){var f=a[e],g=K(f);g!=";"&&(!b&&e==d&&(f[0]=="while"&&v(f[2])||h(f[0],["for","for-in"])&&v(f[4])||f[0]=="if"&&v(f[2])&&!f[3]||f[0]=="if"&&f[3]&&v(f[3])?g=g.replace(/;*\s*$/,";"):g=g.replace(/;+\s*$/,"")),c.push(g))}return I(c,l)}function z(a){var c=a.length;return c==0?"{}":"{"+d+I(a,function(a,e){var f=a[1].length>0,g=m(function(){return l(a[0]?n(["case",K(a[0])+":"]):"default:")},.5)+(f?d+m(function(){return y(a[1]).join(d)}):"");return!b&&f&&e<c-1&&(g+=";"),g}).join(d)+d+l("}")}function C(a){return a?a.length==0?"{}":"{"+d+m(function(){return y(a).join(d)})+d+l("}"):";"}function D(a){var b=a[0],c=a[1];return c!=null&&(b=n([b,"=",K(c)])),b}function K(a){if(!a)return;var b=a[0],c=t[b];if(!c)throw new Error("Can't find generator for \""+b+'"');J.push(a);var d=c.apply(b,a.slice(1));return J.pop(),d}b&&(b=F(b,{indent_start:0,indent_level:4,quote_keys:!1,space_colon:!1}));var c=0,d=b?"\n":"",e=b?" ":"",t={string:B,num:s,name:x,toplevel:function(a){return y(a).join(d+d)},block:C,"var":function(a){return"var "+o(I(a,D))+";"},"const":function(a){return"const "+o(I(a,D))+";"},"import":function(a){return o(I(a,function(a){var b=a[0],c=b;return a.length>1&&(c=a[1][1]),b+" = require("+K(["string",c])+")"}))+";"},"export":function(a){return o(I(a,function(b){var c=b[0],d=c;return b.length>1&&(d=b[1][1]),"exports."+c+" = "+o(I(a,D))}))+";"},"try":function(a,b,c){var d=["try",C(a)];return b&&d.push("catch","("+b[0]+")",C(b[1])),c&&d.push("finally",C(c)),n(d)},"throw":function(a){return n(["throw",K(a)])+";"},"new":function(a,b){return b=b.length>0?"("+o(I(b,K))+")":"",n(["new",p(a,"seq","binary","conditional","assign",function(a){var b=k(),c={};try{b.with_walkers({call:function(){throw c},"function":function(){return this}},function(){b.walk(a)})}catch(d){if(d===c)return!0;throw d}})+b])},"switch":function(a,b){return n(["switch","("+K(a)+")",z(b)])},"break":function(a){var b="break";return a!=null&&(b+=" "+x(a)),b+";"},"continue":function(a){var b="continue";return a!=null&&(b+=" "+x(a)),b+";"},conditional:function(a,b,c){return n([p(a,"assign","seq","conditional"),"?",p(b,"seq"),":",p(c,"seq")])},assign:function(a,b,c){return a&&a!==!0?a+="=":a="=",c||console.log("assign:",a,b,c),n([K(b),a,p(c,"seq")])},dot:function(a){var b=K(a),c=1;a[0]=="num"?b+=".":r(a)&&(b="("+b+")");while(c<arguments.length)b+="."+x(arguments[c++]);return b},call:function(a,b){var c=K(a);return r(a)&&(c="("+c+")"),c+"("+o(I(b,function(a){return p(a,"seq")}))+")"},"function":w,defun:w,"if":function(a,b,c){var d=["if","("+K(a)+")",c?u(b):K(b)];return c&&d.push("else",K(c)),n(d)},"for":function(a,b,c,d){var f=["for"];a=(a!=null?K(a):"").replace(/;*\s*$/,";"+e),b=(b!=null?K(b):"").replace(/;*\s*$/,";"+e),c=(c!=null?K(c):"").replace(/;*\s*$/,"");var g=a+b+c;return g=="; ; "&&(g=";;"),f.push("("+g+")",K(d)),n(f)},"for-in":function(a,b,c,d){var e=n(["for","("]);return a&&(e+="var "),e+=n([x(b)+" in "+K(c)+")",K(d)]),e},"while":function(a,b){return n(["while","("+K(a)+")",K(b)])},"do":function(a,b){return n(["do",K(b),"while","("+K(a)+")"])+";"},"return":function(a){var b=["return"];return a!=null&&b.push(K(a)),n(b)+";"},binary:function(a,b,c){var d=K(b),e=K(c);if(h(b[0],["assign","conditional","seq"])||b[0]=="binary"&&i[a]>i[b[1]])d="("+d+")";if(h(c[0],["assign","conditional","seq"])||c[0]=="binary"&&i[a]>=i[c[1]]&&(c[1]!=a||!h(a,["&&","||","*"])))e="("+e+")";return a==="xor"&&(a="^"),n([d,a,e])},"unary-prefix":function(a,b){var c=K(b);return b[0]=="num"||b[0]=="unary-prefix"&&!H(j,a+b[1])||!r(b)||(c="("+c+")"),a+(f.is_alphanumeric_char(a.charAt(0))?" ":"")+c},"unary-postfix":function(a,b){var c=K(b);return b[0]=="num"||b[0]=="unary-postfix"&&!H(j,a+b[1])||!r(b)||(c="("+c+")"),c+a},sub:function(a,b){var c=K(a);return r(a)&&(c="("+c+")"),c+"["+K(b)+"]"},object:function(a){return a.length==0?"{}":"{"+d+m(function(){return I(a,function(a){if(a.length==3)return l(w(a[0],a[1][2],a[1][3],a[1][4],a[2]));var c=a[0],d=K(a[1]);return b&&b.quote_keys?c=B(c):(typeof c=="number"||!b&&+c+""==c)&&parseFloat(c)>=0?c=s(+c):G(c)||(c=B(c)),l(n(b&&b.space_colon?[c,":",d]:[c+":",d]))}).join(","+d)})+d+l("}")},regexp:function(a,b){return"/"+a+"/"+b},array:function(a){return a.length==0?"[]":n(["[",o(I(a,function(a){return!b&&a[0]=="atom"&&a[1]=="undefined"?"":p(a,"seq")})),"]"])},stat:function(a){return K(a).replace(/;*\s*$/,";")},seq:function(){return o(I(g(arguments),K))},label:function(a,b){return n([x(a),":",K(b)])},"with":function(a,b){return n(["with","("+K(a)+")",K(b)])},atom:function(a){return x(a)}},J=[];return K(a)}function D(a,b){var c=[0];return f.parse(function(){function h(a){return a.pos-e}function i(a){e=a.pos,c.push(e)}function j(){var a=d.apply(this,arguments);c:{if(g&&g.type=="keyword")break c;if(h(a)>b)switch(a.type){case"keyword":case"atom":case"name":case"punc":i(a);break c}}return g=a,a}var d=f.tokenizer(a),e=0,g;return j.context=function(){return d.context.apply(this,arguments)},j}()),c.map(function(b,d){return a.substring(b,c[d+1]||a.length)}).join("\n")}function E(a,b){if(b<=0)return"";if(b==1)return a;var c=E(a,b>>1);return c+=c,b&1&&(c+=a),c}function F(a,b){var c={};a===!0&&(a={});for(var d in b)H(b,d)&&(c[d]=a&&H(a,d)?a[d]:b[d]);return c}function G(a){return/^[a-z_$][a-z0-9_$]*$/i.test(a)&&a!="this"&&!H(f.KEYWORDS_ATOM,a)&&!H(f.RESERVED_WORDS,a)&&!H(f.KEYWORDS,a)}function H(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var f=a("./parser"),g=f.slice,h=f.member,i=f.PRECEDENCE,j=f.OPERATORS,m=function(){var a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_";return function(b){var c="";do c=a.charAt(b%54)+c,b=Math.floor(b/54);while(b>0);return c}}();l.prototype={has:function(a){for(var b=this;b;b=b.parent)if(H(b.names,a))return b},has_mangled:function(a){for(var b=this;b;b=b.parent)if(H(b.rev_mangled,a))return b},toJSON:function(){return{names:this.names,uses_eval:this.uses_eval,uses_with:this.uses_with}},next_mangled:function(){for(;;){var a=m(++this.cname),b;b=this.has_mangled(a);if(b&&this.refs[b.rev_mangled[a]]===b)continue;b=this.has(a);if(b&&b!==this&&this.refs[a]===b&&!b.has_mangled(a))continue;if(H(this.refs,a)&&this.refs[a]==null)continue;if(!G(a))continue;return a}},get_mangled:function(a,b){if(this.uses_eval||this.uses_with)return a;var c=this.has(a);if(!c)return a;if(H(c.mangled,a))return c.mangled[a];if(!b)return a;var d=c.next_mangled();return c.rev_mangled[d]=a,c.mangled[a]=d},define:function(a){if(a!=null)return this.names[a]=a}};var p=function(){},x=function(){function b(c){switch(c[0]){case"string":case"num":return c[1];case"name":case"atom":switch(c[1]){case"true":return!0;case"false":return!1}break;case"unary-prefix":switch(c[1]){case"!":return!b(c[2]);case"typeof":return typeof b(c[2]);case"~":return~b(c[2]);case"-":return-b(c[2]);case"+":return+b(c[2])}break;case"binary":var d=c[2],e=c[3];switch(c[1]){case"&&":return b(d)&&b(e);case"||":return b(d)||b(e);case"|":return b(d)|b(e);case"&":return b(d)&b(e);case"^":return b(d)^b(e);case"+":return b(d)+b(e);case"*":return b(d)*b(e);case"/":return b(d)/b(e);case"-":return b(d)-b(e);case"<<":return b(d)<<b(e);case">>":return b(d)>>b(e);case">>>":return b(d)>>>b(e);case"==":return b(d)==b(e);case"===":return b(d)===b(e);case"!=":return b(d)!=b(e);case"!==":return b(d)!==b(e);case"<":return b(d)<b(e);case"<=":return b(d)<=b(e);case">":return b(d)>b(e);case">=":return b(d)>=b(e);case"in":return b(d)in b(e);case"instanceof":return b(d)instanceof b(e)}}throw a}var a={};return function(c,d,e){try{var f=b(c),g;switch(typeof f){case"string":g=["string",f];break;case"number":g=["num",f];break;case"boolean":g=["name",String(f)];break;default:throw new Error("Can't handle constant of type: "+typeof f)}return d.call(c,g,f)}catch(h){if(h===a)return c[0]=="binary"&&(c[1]=="==="||c[1]=="!==")&&(w(c[2])&&w(c[3])||t(c[2])&&t(c[3]))&&(c[1]=c[1].substr(0,2)),e?e.call(c,c):null;throw h}}}(),A=f.array_to_hash(["name","array","string","dot","sub","call","regexp"]),I;(function(){function a(a){this.v=a}I=function(b,c,d){var e=[];for(var f=0;f<b.length;++f){var g=c.call(d,b[f],f);g instanceof a?e.unshift(g.v):e.push(g)}return e},I.at_top=function(b){return new a(b)}})(),c.ast_walker=k,c.ast_mangle=o,c.ast_squeeze=z,c.gen_code=C,c.ast_add_scope=n,c.ast_squeeze_more=a("./squeeze-more").ast_squeeze_more,c.set_logger=function(a){p=a},c.make_string=B,c.split_lines=D,c.MAP=I,c.Scope=l}),_require.define("compiler","compiler/index.js",function(a,b,c,d,e){var f;try{f=a("fs")}catch(g){}var h;try{h=a("http")}catch(g){}var i=a("./parser"),j=a("./process"),k=a("./ast-mutators");a("../runtime/runtime_string"),c.preprocessors={},c.defaultCompilationOptions={source:null,filename:"?",globals:[],ignorePragmas:!1,implicitReturns:!0,automaticVarDeclarations:!0,namedLambdas:!0,strictEqualityOperators:!0,keywordArguments:!0,mangleNames:!1,optimizationLevel:0,runtimeClassCreation:!0,moduleStub:!1,codegen:!0,outputFormatting:{indent_level:2,beautify:!0},detailedOutput:!1,strict:!0,raw:!1,wrapSource:!0,includeRuntime:!0};var l=function(a,b,c){a.name="SyntaxError";var d=b.split(/[\r\n]/),e=a.line+1,f=3,g=e<f?0:e-f;d=d.slice(g,e);if(e>f){var h="";if(m=d[0].match(/^\s+/))for(j=0;j<m[0].length;++j)h+=" ";d[0]=h+"...\n"+d[0]}d=d.join("\n");var i="";for(var j=0;j<a.col;++j)i+=" ";return a.diagnostic=a.name+": "+a.message+" ("+c.filename+":"+a.line+":"+a.col+")\n"+d+"\n"+i+"⬆",a.stack&&(a.stack=a.diagnostic+"\n"+a.stack.split(/[\r\n]/).slice(1).join("\n")),a};c.compile=function(b,d){var e=Object.create(c.defaultCompilationOptions);typeof b=="object"&&(d=b,b=d.source),b||(b="");if(typeof d=="object")for(var f in d)e[f]=d[f];e.strictMode=!1,e.embedTokens=!1;if(!e.ignorePragmas){var g=/^\s*(?:true|y.*|on|1)\s*$/i;b.forEachMatch(/^#\s*pragma\s+(\w+)\s(.+)/gm,function(a){var b=a[1],c=a[2];switch(b){case"strict":e.strict=g.test(c);break;case"enable":if(c==="ehtml")Array.isArray(e.preprocess)?e.preprocess.indexOf("ehtml")===-1&&e.preprocess.push("ehtml"):e.preprocess=["ehtml"];else throw new Error('Unknown value "'+c+'" for "enable" pragma');break;case"disable":if(c==="ehtml")Array.isArray(e.preprocess)&&(c=e.preprocess.indexOf("ehtml"))!==-1&&e.preprocess.splice(c,1);else throw new Error('Unknown value "'+c+'" for "disable" pragma');break;default:throw new Error('Unknown pragma directive "'+b+'"')}})}if(e.preprocess){if(!Array.isArray(e.preprocess))throw Error('"preprocess" option must have an array value');e.preprocess.forEach(function(d){var f,g;typeof d=="function"||typeof d=="object"?f=d:(f=c.preprocessors[d])||(f=a("./preprocessors/"+d));if(!f)throw Error("preprocessor "+d+" not found");typeof f.process=="function"?g=f.process:g=f,b=g.call(f,b,e)})}b+="\n",e.includeRuntime&&(b=s(b,e)),e.wrapSource&&(b=r(b));try{var h=i.parse(b,e)}catch(m){throw m.name==="JS_Parse_Error"&&(m=l(m,b,e)),m}e.implicitReturns&&(h=k.add_implicit_returns(h,e));if(e.automaticVarDeclarations){var n=["global","process","require","window","__filename","__dirname","module"];Array.isArray(e.globals)&&e.globals.length&&(n=n.concat(e.globals)),e.moduleStub&&n.push("exports"),h=k.first_time_var_delc(h,n,e)}e.namedLambdas&&(h=k.named_lambda_assignments(h,e)),e.strictEqualityOperators&&(h=k.enforce_strict_eq_ops(h,e)),e.keywordArguments&&(h=k.enable_keyword_arguments(h,e)),e.runtimeClassCreation&&(h=k.enable_class_rt_function(h,e)),e.mangleNames&&(h=j.ast_mangle(h)),e.optimizationLevel&&(h=j.ast_squeeze(h)),typeof e.optimizationLevel=="number"&&e.optimizationLevel>1&&(h=j.ast_squeeze_more(h));if(!e.codegen)return h;var o=j.gen_code(h,e.outputFormatting);return e.wrapSource&&e.moduleStub&&(o=o.replace(/^\(function\s*\(\)\s*\{/,"function(require,module,exports){").replace(/\)\(\);$/,"")),e.strict&&(e.wrapSource?o=o.replace(/\(function\s*\(\)\s*\{/,'(function(){"use strict";'):o='"use strict";'+o),c.debug&&typeof console!="undefined"&&console.log((d.filename||"<move code>")+" -> \n"+o),e.detailedOutput?{ast:h,code:o}:o},c.compileFileSync=function(a,b){if(!f)throw new Error("File system access is not supported");return typeof b=="object"&&!b.filename?b.filename=a:b={filename:a},c.compile(f.readFileSync(a,"utf8"),b)},c.eval=function(a,b){if(typeof a=="object")b=a,a=b.source;else{if(!b||typeof b!="object")b={};b.source=a}var d=c.compile(b);return n(d,b)};var n,o;try{o=a("vm").runInThisContext,n=function(b,c){var d={require:global.require};global.require=a;var e=o(b.code!==undefined?b.code:b,String(c&&c.filename||"<input>"));return Object.keys(d).forEach(function(a){var b=d[a];b!==undefined?global[a]=b:delete global[a]}),e}}catch(g){n=function(a,b){var c=global.require;global.require=__move.require;var d=global.eval(a.code!==undefined?a.code:a,String(b&&b.filename||"<input>"));return c!==undefined?global.require=c:delete global.require,d}}typeof window!="undefined"&&window?c.compileURL=function(a,b,c){var d=q(arguments,[["url"],["options"],["callback"]]);typeof d.options=="function"&&(d.callback=d.options,d.options={});var e=window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest;return e.open("GET",d.url,!0),"overrideMimeType"in e&&e.overrideMimeType("text/plain"),e.onreadystatechange=function(){if(e.readyState===4){var b,c,f=a.indexOf("://")!==-1?a.match(/^http/):document.location.protocol.match(/^http/);if(f&&String(e.status).charAt(0)==="2"||!f&&e.status===0)try{b=move.compile(e.responseText,d.options)}catch(g){c=g}else e.status&&e.statusText?(c=new Error("HTTP request error: "+e.status+" "+e.statusText),c.httpStatus=e.status):c=new Error("Unspecified HTTP request error");if(typeof d.callback=="function")d.callback(c,b);else if(c)throw c}},e.send(null)}:!h;var p=a("../runtime/symbols")._MoveKWArgsT,q=function(a,b){var c=a[0],d,e,f,g;if(typeof c=="object"&&c.__kw===p){d=c;for(g=0;g<b.length;++g)e=b[g][0],d[e]===undefined&&(f=b[g][1])!==undefined&&(d[e]=f)}else{d={};for(g=0;g<b.length;++g)e=b[g][0],f=a[g],f===undefined&&(f=b[g][1]),f!==undefined&&(d[e]=f)}return d},r=function(a){return"(function() {"+a+"})()"},s=function(a,b){var c="";b.automaticVarDeclarations||(c+="var "),c+="Move = __move.runtime";var d=Object.keys(global.__move.runtime);return d.length&&(c+=", "+d.map(function(a){return a+" = Move."+a}).join(",")),c+"; "+a};a.extensions&&(a.extensions[".mv"]=a.extensions[".move"]=function(a,b){return content=c.compileFileSync(b),a._compile(content,b)}),Object.keys(c).forEach(function(a){global.__move[a]=c[a]}),a("../runtime")}),_require.define("","index.js",function(a,b,c,d,e){global.__move=c,c.version=function(){return c.version._v===undefined&&(c.version._v=JSON.parse(a("fs").readFileSync(e+"/../package.json","utf8")).version),c.version._v},a("./compiler")}),_require("");var move=global.__move;move.version=function(){return"0.4.3"},move.require=Require(),move.executeScript=function(a,b,c){if(a)throw a;Function(b)()},move.compileModule=function(a,b,c,d,e){var f;return typeof e=="object"?e=Object.create(e):e={},e.filename=c||"<"+(b||"main")+">",e.moduleStub=!0,f=move.compile(a,e),b?f=wrapAsModule(f,null,c,b):f="("+f+")(__move.require, {exports:{}}, {});\n",d=d||d===undefined,d?move.executeScript(null,f,c):f},move.scriptCompilationOptions={preprocess:["ehtml"]};var wrapAsModule=function(a,b,c,d){return d||(d=b.replace(/\.[^\.]+$/,"")),"__move.require.define("+JSON.stringify(d)+","+JSON.stringify(c||b)+","+a+");\n"};move.runBrowserScripts=function(a,b){var c,d,e,f,g,h=Object.create(move.scriptCompilationOptions),i=0,j=[],k=0,l=function(){++k},m=function(){if(--k===0){var a=0,c=j.length;for(;a<c;++a)move.executeScript.apply(move,j[a]);typeof b=="function"&&b(null,j)}};f=(a||document).getElementsByTagName("script"),l();for(d=0,e=f.length;d<e;++d)c=f[d],c&&c.type==="text/move"&&function(a,b){l();var c=Object.create(h);if(b.src)c.filename=b.src,c.moduleStub=!0,move.compileURL(c.filename,c,function(d,e){e=wrapAsModule(e,b.getAttribute("src"),c.filename),j[a]=[d,e,b],m()});else{try{var d=b.getAttribute("module");g=move.compileModule(b.innerHTML,d,null,!1,c),j[a]=[null,g,b]}catch(e){j[a]=[e,null,b]}m()}}(i++,c);return m(),null};var _runScripts=function(){move.runBrowserScripts()};return window.addEventListener?window.addEventListener("DOMContentLoaded",_runScripts,!1):window.attachEvent("onload",_runScripts),move}())
